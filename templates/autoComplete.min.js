var a,b;a=this,b=function(){"use strict";function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var t,e,r,n=function(){return document.querySelector("#autoComplete")};(r=document.createElement("div")).setAttribute("class","autoComplete_results_list_container"),n().insertAdjacentElement("afterend",r),t=r,(e=document.createElement("ul")).setAttribute("class","autoComplete_results_list"),t.appendChild(e);["focus","blur"].forEach(function(t){var e=document.querySelector(".autoComplete_results_list");n().addEventListener(t,function(){e.style="blur"===t?"opacity: 0; visibility: hidden;":"opacity: 1; visibility: visible;"})});var o=function(){return n().value=""},s=function(){document.querySelector(".autoComplete_results_list").innerHTML=""},i=n,l=function(n,a,o){var s,i=document.querySelector(".autoComplete_results_list");n.forEach(function(t,e){var r=document.createElement("li");r.setAttribute("data-".concat(o.tag),o.value||a[e]),s=1===n.length?"autoComplete_result autoComplete_single_result":"autoComplete_result",r.setAttribute("id",a[e]),r.setAttribute("class",s),r.innerHTML=n[e],i.appendChild(r)})},u=function(e,r){document.querySelectorAll(".autoComplete_result").forEach(function(t){t.addEventListener("click",function(t){e(t.target.closest(".autoComplete_result")),o(),s(),n().setAttribute("placeholder","".concat(t.target.closest(".autoComplete_result").id.length>r?t.target.closest(".autoComplete_result").id.slice(0,r)+"...":t.target.closest(".autoComplete_result").id))})})},c=s,d=function(t){document.querySelector("body").innerHTML='\n\t\t<div class="autoComplete_error">\n\t\t\t<div class="autoComplete_message">'.concat(t,"</div>\n\t\t</div>\n\t")};return function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataSrc=function(){return Array.isArray(t.dataSrc)?t.dataSrc:Array.isArray(t.dataSrc())?t.dataSrc():void d("<strong>Error</strong>, <strong>data source</strong> value is not an <strong>Array</string>.")},this.placeHolder=!!String(t.placeHolder)&&t.placeHolder,this.placeHolderLength=Number(t.placeHolderLength)?t.placeHolderLength:1/0,this.maxResults=Number(t.maxResults)?t.maxResults:10,this.highlight="boolean"!=typeof t.highlight||t.highlight,this.dataAttribute=t.dataAttribute===Object?{tag:t.dataAttribute.tag,value:t.dataAttribute.value}:{tag:"autocomplete",value:""},this.onSelection="function"==typeof t.onSelection?t.onSelection:d("<strong>Error</strong>, <strong>onSelection</strong> value is not a <strong>Function</string>."),this.init()}var t,r,n;return t=e,(r=[{key:"search",value:function(t,e){t=t.replace(/ /g,"").toLowerCase();for(var r=[],n=0,a=0;a<e.length;a++){var o=e[a];n<t.length&&o.toLowerCase()===t[n]&&(this.highlight&&(o='<span class="autoComplete_highlighted_result">'+o+"</span>"),n++),r.push(o)}return n!==t.length?"":r.join("")}},{key:"listMatchedResults",value:function(){var r=this;this.resList=[],this.cleanResList=[];var n=i().value;try{this.dataSrc().filter(function(t){var e=r.search(n,t);e&&(r.resList.push(e),r.cleanResList.push(t))})}catch(t){d(t)}l(this.resList.slice(0,this.maxResults),this.cleanResList.slice(0,this.maxResults),this.dataAttribute)}},{key:"searchInputValidation",value:function(t){var e=this;t.addEventListener("keyup",function(){0<t.value.length&&" "!==t.value?(c(),e.listMatchedResults(),u(e.onSelection,e.placeHolderLength)):c()})}},{key:"setPlaceHolder",value:function(){this.placeHolder&&i().setAttribute("placeholder",this.placeHolder)}},{key:"init",value:function(){try{this.dataSrc()&&(this.setPlaceHolder(),this.searchInputValidation(i()))}catch(t){d("<strong>error</strong>, autoComplete <strong>engine</strong> is not <strong>starting</strong>...")}}}])&&a(t.prototype,r),n&&a(t,n),e}()},"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.autoComplete=b();
